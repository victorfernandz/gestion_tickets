{% load static %}

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crear Ticket</title>
    <link rel="stylesheet" href="{% static 'tickets/css/style.css' %}">
    <script src="{% static 'tickets/js/script.js' %}" defer></script>
</head>
<body>
    <!-- Barra superior fija -->
    <header class="navbar">
        <div class="logo">
            <img src="{% static 'tickets/imagenes/logo.jpeg' %}" alt="Logo" class="logo-img">
        </div>
        <div class="navbar-title">
            <h1>Gestión de Tickets</h1>
        </div>
    </header>

    <!-- Contenedor principal -->
    <div class="container">
        <!-- Menú lateral -->
        <div class="sidebar">
            <nav>
                <ul>
                    <li><a href="{% url 'home' %}">Inicio</a></li>
                    <li><a href="{% url 'listar_tickets' %}">Tickets</a></li>
                    <li><a href="#">Reportes</a></li>
                    <li><a href="{% url 'administrar_tickets' %}">Administración</a></li>
                    <li><a href="https://sites.google.com/altamiragroup.com.py/academia-altamira/p%C3%A1gina-principal" target="_blank">Academia AltamiraGroup</a></li>
                </ul>
            </nav>
            <!-- Botón de cerrar sesión -->
            <div class="logout-container">
                <a href="{% url 'logout' %}" class="logout-button">Cerrar sesión</a>
            </div>
        </div>

        <!-- Contenido dinámico -->
        <main class="content">
            <div class="form-container">
                <h1>Crear nuevo ticket</h1>
                
                <!-- Formulario para crear un ticket con archivos adjuntos -->
                <form method="post" enctype="multipart/form-data">
                    {% csrf_token %}

                    <!-- Categoría -->
                    <div class="form-group">
                        <label for="categoria">Seleccione la categoría</label>
                        <select id="categoria" name="categoria" required>
                            <option value="">Seleccione una opción</option>
                            {% for categoria in tipo_categoria %}
                                <option value="{{ categoria.id }}">{{ categoria.descripcion }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <!-- Tipo de Caso -->
                    <div class="form-group">
                        <label for="tipoCaso">Seleccione el tipo de caso:</label>
                        <select id="tipoCaso" name="tipoCaso" required>
                            <option value="">Seleccione un caso</option>
                        </select>                        
                    </div>
                    
                    <!-- Descripción del inconveniente -->
                    <div class="form-group">
                        <label for="descripcion">Descripción del inconveniente:</label>
                        <textarea id="descripcion" name="descripcion" rows="5" placeholder="Escriba una descripción detallada" maxlength="500" required></textarea>
                        <div class="contador-letras">
                            <span id="contador-letras">500</span> caracteres restantes
                        </div>
                    </div>                    

                    <!-- Prioridad -->
                    <div class="form-group">
                        <label for="prioridad">Prioridad:</label>
                        <select id="prioridad" name="prioridad" required>
                            <option value="1">Bajo</option>
                            <option value="2">Medio</option>
                            <option value="3">Alto</option>
                            <option value="4">Muy Alto</option>
                        </select>
                    </div>

                    <!-- Estado (Siempre abierto en la creación) -->
                    <div class="form-group-estado">
                        <label for="estado">Estado:</label>
                        <input type="text" id="estado" name="estado" value="Abierto" readonly>
                    </div>

                    <!-- Adjuntar archivos al crear ticket 
                    <div class="form-group">
                        <label for="archivo">Adjuntar archivo (opcional):</label>
                        <input type="file" id="archivo" name="archivo" accept=".jpg,.jpeg,.png,.pdf,.doc,.docx,.xls,.xlsx">
                    </div>-->

                    <!-- Botón para enviar el formulario -->
                    <div class="form-actions">
                        <button type="submit" class="btn-submit">Crear ticket</button>
                    </div>
                </form>
            </div>
        </main>
    </div>
</body>
</html>